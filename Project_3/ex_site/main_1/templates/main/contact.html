{% extends 'main/index.html' %}
{% block content %}
{% load static %}
<div class="contact_block">
    <div class="contact_wrapper">

        <form action="{% url 'contact' %}" method="post" class="bg authorization" style="margin-top: 50px">
                    <div class="warning">
{% for message in messages %}
<div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
  <strong>{{ message }}</strong>
  <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
</div>
{% endfor %}
</div>
            {% csrf_token %}
              {{ form.as_p }}
             <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response">
            <div class="center">
            <button class="btn_self">Отправить</button>
            </div>
        </form>
    </div>
</div>
  <script>
    grecaptcha.ready(function() {
      grecaptcha.execute('{{recaptcha_site_key}}', {action: {% url 'contact' %}).then(function(token) {
        document.getElementById('g-recaptcha-response').value = token;
      });
    });
  </script>
{% endblock %}